<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dark SL</title>
    <link rel="icon" href="https://imaadh755.github.io/COC/DarkSL.png">
    <link rel="stylesheet" href="coc.css">
    <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;700&display=swap" rel="stylesheet">
        <!-- Other meta tags -->
    <link rel="manifest" href="manifest.json">
    <meta name="theme-color" content="#00ffcc">
</head>
<body>
    <!-- Logo Section -->
    <div class="logo-container">
        <img src="https://imaadh755.github.io/COC/DarkSL.png" alt="Dark SL Logo" class="logo">
    </div>

    <!-- Toggle switch for Grid View -->
    <div class="view-toggle">
        <span class="toggle-text">Dark SL <br>Developed by IMaadh</span>
    </div>
    
<div id="install-prompt" style="display:none;">
    <button id="install-button">Add to Home Screen</button>
</div>

    <div class="container grid-view">
        <!-- Categories (keep the rest as is) -->
        <div class="category" onclick="openIframePage('https://www.warreport.app/#/clans/2qqqqUL9U')">
            <img src="https://imaadh755.github.io/COC/members.gif" alt="Clan Members">
            <p>Clan Members</p>
        </div>
    <div class="category" onclick="openIframePage('https://www.warreport.app/#/clans/2QQQQUL9U/currentwar')">
            <img src="https://imaadh755.github.io/COC/War Status.gif" alt="War Status">
            <p>War Status</p>
        </div>
        <div class="category" onclick="openIframePage('https://www.warreport.app/#/clans/2QQQQUL9U/currentwar/warleague')">
            <img src="https://imaadh755.github.io/COC/league.gif" alt="War League">
            <p>War League</p>
        </div>
        <div class="category" onclick="openDirectPage('https://store.supercell.com/clashofclans')">
            <img src="https://imaadh755.github.io/COC/gift.gif" alt="Free Gifts">
            <p>Free Gifts</p>
        </div>
        <div class="category" onclick="openIframePage('https://supercell.com/en/games/clashofclans/blog/')">
            <img src="https://imaadh755.github.io/COC/annoucement.gif" alt="Announcements">
            <p>Announcements</p>
        </div>
        <div class="category" onclick="openIframePage('https://imaadh755.github.io/COC/Tips!.html')">
            <img src="https://imaadh755.github.io/COC/tips.gif" alt="Tips!">
            <p>Tips!</p>
        </div>
        <div class="category" onclick="openIframePage('https://imaadh755.github.io/COC/Clash of Clash Vouchers.html')">
            <img src="https://imaadh755.github.io/COC/voucher.gif" alt="Clash of Clan Vouchers">
            <p>Clash of Clan Vouchers</p>
        </div>
        <div class="category" onclick="openIframePage('https://imaadh755.github.io/COC/Player Last Active.html')">
            <img src="https://imaadh755.github.io/COC/lastactive.gif" alt="Player Last Active">
            <p>Player Last Active</p>
        </div>
         <div class="category" onclick="openIframePage('https://imaadh755.github.io/COC/War Troops Calculator.html')">
            <img src="https://imaadh755.github.io/COC/calculator.gif" alt="War Troops Calculator">
            <p>War Troops Calculator</p>
        </div>
        <div class="category" onclick="openDirectPage('https://chat.whatsapp.com/HIDDfp0lZoJ0INgiywO1vN')">
            <img src="https://imaadh755.github.io/COC/DarkSL.png" alt="WhatsApp Group">
            <p>WhatsApp Group</p>
        </div>
    </div>

    <script>
        /**
         * Opens a new tab with an iframe displaying the provided URL
         * @param {string} url - The URL to load in the iframe
         */
        function openIframePage(url) {
            const newTab = window.open();
            newTab.document.write(`
                <!DOCTYPE html>
                <html lang="en">
                <head>
                    <meta charset="UTF-8">
                    <meta name="viewport" content="width=device-width, initial-scale=1.0">
                    <title>Content Viewer</title>
                    <style>
                        body {
                            margin: 0;
                            padding: 0;
                            overflow: hidden;
                        }
                        iframe {
                            width: 100vw;
                            height: 100vh;
                            border: none;
                        }
                    </style>
                </head>
                <body>
                    <iframe src="${url}" allowfullscreen></iframe>
                </body>
                </html>
            `);
        }

        /**
         * Opens a URL directly in a new tab without iframe
         * @param {string} url - The URL to open directly
         */
        function openDirectPage(url) {
            window.open(url, '_blank');
        }
    </script>
    
    <script>
    if ('serviceWorker' in navigator) {
        window.addEventListener('load', () => {
            navigator.serviceWorker.register('/service-worker.js')
                .then(registration => {
                    console.log('Service Worker registered:', registration);
                })
                .catch(error => {
                    console.log('Service Worker registration failed:', error);
                });
        });
    }
</script>

    <script>
    let deferredPrompt;
    
    window.addEventListener('beforeinstallprompt', (event) => {
        // Prevent the default installation prompt
        event.preventDefault();
        // Store the event for later use
        deferredPrompt = event;

        // Show your custom prompt (like a button or banner)
        document.getElementById('install-prompt').style.display = 'block';
    });

    document.getElementById('install-button').addEventListener('click', () => {
        // Show the native install prompt
        deferredPrompt.prompt();
        
        // Wait for the user to respond to the prompt
        deferredPrompt.userChoice.then((choiceResult) => {
            if (choiceResult.outcome === 'accepted') {
                console.log('User accepted the A2HS prompt');
            } else {
                console.log('User dismissed the A2HS prompt');
            }
            deferredPrompt = null;
        });
    });
</script>

    
</body>
</html>
